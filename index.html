<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>í›ˆë°œ)</title>
    <style>
        body {
            height: 100vh;
            margin: 0;
            overflow: hidden; 
            background-color: white; 
            font-family: 'Malgun Gothic', sans-serif;
            display: flex;
            flex-direction: column;
            justify-content: center; 
            align-items: center; 
            position: relative; 
        }

        #hoonbal-btn {
            padding: 25px 50px;
            font-size: 2em;
            cursor: pointer;
            background-color: white; 
            color: black; 
            border: 3px solid black; 
            border-radius: 15px;
            position: relative; 
            z-index: 15;
            transition: background-color 0.1s, transform 0.1s;
        }
        #hoonbal-btn:active {
            transform: translateY(2px);
            box-shadow: none;
        }

        #fountain-source {
            position: absolute; 
            bottom: 5%; 
            left: 50%; 
            transform: translateX(-50%); 
            font-size: 10em; 
            z-index: 10; 
            pointer-events: none; 
        }

        #game-area {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none; 
            z-index: 5; 
        }

        .hoonbal-text {
            position: absolute;
            font-size: 1.5em; 
            font-weight: bold;
            color: #007bff; 
            white-space: nowrap; 
            opacity: 1; 
            transition: opacity 2s ease-out, transform 0s linear; 
        }
    </style>
</head>
<body>
    
    <div id="fountain-source">â›²</div>
    <button id="hoonbal-btn">í›ˆë°œ!</button>
    <div id="game-area"></div>

    <script>
        const hoonbalButton = document.getElementById('hoonbal-btn');
        const fountainSource = document.getElementById('fountain-source');
        const gameArea = document.getElementById('game-area');
        const hoonbalText = 'í›ˆë°œ!';

        const hoonbals = []; 
        let spawnIntervalId = null; 
        const SPAWN_RATE = 100; 

        // ðŸš€ ì´ˆê¸° ì†Ÿì•„ì˜¤ë¥´ëŠ” íž˜ ëŒ€í­ ì¦ê°€ (ì´ì „ 8~15ì—ì„œ 15~25ë¡œ)
        const MIN_INITIAL_VY = 15; 
        const MAX_INITIAL_VY = 25;

        const MIN_INITIAL_VX = 1; 
        const MAX_INITIAL_VX = 5;

        // â¬‡ï¸ ì¤‘ë ¥ íš¨ê³¼ë¥¼ ë‚®ì¶°ì„œ ë” ì˜¤ëž˜ ë–  ìžˆê²Œ ë§Œë“¦ (ì´ì „ 0.3ì—ì„œ 0.15ë¡œ)
        const GRAVITY = 0.15; 
        const UPDATE_INTERVAL = 10; 

        let gameLoop = setInterval(updateHoonbals, UPDATE_INTERVAL);

        function spawnHoonbal() {
            const rect = fountainSource.getBoundingClientRect();
            
            const newHoonbal = document.createElement('span');
            newHoonbal.textContent = hoonbalText;
            newHoonbal.classList.add('hoonbal-text');
            
            const initialX = rect.left + rect.width / 2;
            const initialY = rect.top + rect.height; 

            newHoonbal.style.visibility = 'hidden';
            gameArea.appendChild(newHoonbal);
            const hoonbalWidth = newHoonbal.offsetWidth;
            const hoonbalHeight = newHoonbal.offsetHeight;
            newHoonbal.style.visibility = 'visible';

            const initialVy = -(Math.random() * (MAX_INITIAL_VY - MIN_INITIAL_VY) + MIN_INITIAL_VY);
            const initialVx = (Math.random() - 0.5) * (MAX_INITIAL_VX - MIN_INITIAL_VX) * 2;
            
            const hoonbalData = {
                element: newHoonbal,
                x: initialX - hoonbalWidth / 2, 
                y: initialY - hoonbalHeight / 2, 
                vx: initialVx, 
                vy: initialVy,
                width: hoonbalWidth, 
                height: hoonbalHeight,
                age: 0, 
                maxAge: 300 
            };

            hoonbals.push(hoonbalData);
        }

        function updateHoonbals() {
            const screenHeight = window.innerHeight;

            for (let i = hoonbals.length - 1; i >= 0; i--) {
                const t = hoonbals[i];
                
                t.vy += GRAVITY; 

                t.x += t.vx;
                t.y += t.vy;

                if (t.y > screenHeight + t.height) { 
                    t.element.remove();
                    hoonbals.splice(i, 1);
                    continue; 
                }

                t.age++;
                if (t.age > t.maxAge / 2) { 
                    const opacity = 1 - ((t.age - t.maxAge / 2) / (t.maxAge / 2));
                    t.element.style.opacity = Math.max(0, opacity); 
                }
                
                t.element.style.left = t.x + 'px';
                t.element.style.top = t.y + 'px';
            }
        }

        /* * ë²„íŠ¼ ëˆ„ë¦„ ìƒíƒœ ê°ì§€ ë¡œì§ * */
        
        const startSpawning = () => {
             if (spawnIntervalId === null) {
                spawnHoonbal();
                spawnIntervalId = setInterval(spawnHoonbal, SPAWN_RATE);
            }
        };

        const stopSpawning = () => {
            if (spawnIntervalId !== null) {
                clearInterval(spawnIntervalId);
                spawnIntervalId = null;
            }
        };

        hoonbalButton.addEventListener('mousedown', startSpawning);
        document.addEventListener('mouseup', stopSpawning);
        
        hoonbalButton.addEventListener('touchstart', (e) => {
            e.preventDefault(); 
            startSpawning();
        });
        document.addEventListener('touchend', stopSpawning);
    </script>
</body>
</html>
